<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_172) on Wed Jan 16 09:51:24 GMT 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Overview (Jenkins Pub-Sub "light" Bus 1.12 API)</title>
<meta name="date" content="2019-01-16">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview (Jenkins Pub-Sub \"light\" Bus 1.12 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 class="title">Jenkins Pub-Sub "light" Bus 1.12 API</h1>
</div>
<div class="header">
<div class="subTitle">
<div class="block">A light-weight <a href="http://www.enterpriseintegrationpatterns.com/patterns/messaging/PublishSubscribeChannel.html">Publish-Subscribe</a> (async) event notification module for Jenkins.</div>
</div>
<p>See: <a href="#overview.description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="org/jenkinsci/plugins/pubsub/package-summary.html">org.jenkinsci.plugins.pubsub</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="org/jenkinsci/plugins/pubsub/listeners/package-summary.html">org.jenkinsci.plugins.pubsub.listeners</a></td>
<td class="colLast">
<div class="block">Jenkins Listener implementations.</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="contentContainer"><a name="overview.description">
<!--   -->
</a>
<div class="block">A light-weight <a href="http://www.enterpriseintegrationpatterns.com/patterns/messaging/PublishSubscribeChannel.html">Publish-Subscribe</a> (async) event notification module for Jenkins.
<p>

<h1>Light-weight messages</h1>
We purposely chose a very simple <code>Properties</code> based (name-value pairs) extension for the message
type, so as to avoid marshal/unmarshal issues with more complex message type
(the <code>PubsubBus</code> implementation could be distributed). It is also hoped that
this approach will promote the use of very light-weight event messages that contain
"just enough" information as to allow <code>ChannelSubscriber</code>s to decide if they
are interested in the event (or not). If they are interested in the event, they can
use standard Jenkins mechanisms to gain access to the full domain model object(s)
relating to the event.
<p>
<strong>Note</strong> that the use of lose typing is very intentional as complex types
are a notorious source of problems in distributed asynchronous messaging middleware.
Also consider that this should not be a major inconvenience if you stick with 
light-weight events i.e. sending complex/bloated events is already considered as
being an anti-pattern here.

<h1>Pre-defined Events and EventProps</h1>
As stated above, this library assumes light-weight <code>Properties</code> based (name-value pairs)
messages, where the names and values are opague/untyped Strings.
<p>
For this reason, we have defined a few types that we hope will help us to standardize
on some of the property names used in the messages.
<ul>
    <li><a href="org/jenkinsci/plugins/pubsub/Events.html">Events</a></li>
    <li><a href="org/jenkinsci/plugins/pubsub/EventProps.html">EventProps</a></li>
</ul>
Please try to use this property name types. If you find you need to create messages that
are not covered by the properties defined here, and you think that the properties are likely to be needed by others,
then please create a PR on the GitHub repo so we can create a standardized name for the property.

<h1>Anti-patterns</h1>
The main one is: <strong>DO NOT ADD LOTS OF PROPERTIES TO MESSAGE</strong>. Please keep them as light-weight
events with a small few properties i.e. just enough for the
<a href="org/jenkinsci/plugins/pubsub/ChannelSubscriber.html">ChannelSubscriber</a> (see below) to be able to determine
if it is interested in the event data and to be able to get it (e.g. 
<a href="org/jenkinsci/plugins/pubsub/EventProps.Jenkins.html#jenkins_object_url">EventProps.Jenkins.html.jenkins_object_url</a> - see below).

<h1>Publishing to an event Channel</h1>

<pre>
<a href="org/jenkinsci/plugins/pubsub/PubsubBus.html">PubsubBus</a> bus = PubsubBus.getBus();

bus.publish(new <a href="org/jenkinsci/plugins/pubsub/Message.html">RunMessage</a>(run)
            .setEventName(<a href="org/jenkinsci/plugins/pubsub/Events.JobChannel.html">Events.JobChannel</a>.run_started));    
</pre>

<h1>Subscribing to an event Channel</h1>

<pre>
<a href="org/jenkinsci/plugins/pubsub/PubsubBus.html">PubsubBus</a> bus = PubsubBus.getBus();

bus.subscribe(<a href="org/jenkinsci/plugins/pubsub/Events.JobChannel.html#NAME">Events.JobChannel.NAME</a>, new <a href="org/jenkinsci/plugins/pubsub/ChannelSubscriber.html">ChannelSubscriber</a>() {
        
        public void onMessage(@Nonnull <a href="org/jenkinsci/plugins/pubsub/Message.html">Message</a> message) {
            if (message instanceof <a href="org/jenkinsci/plugins/pubsub/RunMessage.html">RunMessage</a>) {
                RunMessage jobMessage = (RunMessage)message;
                String jobName = jobMessage.getJobName();
                String runId = message.getId();
                
                // etc etc
            }
        }
    }, 
    User.current(), // Used for authentication 
    new <a href="org/jenkinsci/plugins/pubsub/EventFilter.html">EventFilter</a>().setEventName(Events.JobChannel.run_started) // Event filter (optional)
);    
</pre></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016&#x2013;2019. All rights reserved.</small></p>
</body>
</html>
